<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Whisper Network - Configuration Avanc√©e</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <span class="icon">üîí</span>
        <h1>Whisper Network Pro</h1>
      </div>
      <div class="status" id="status">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">V√©rification...</span>
      </div>
    </div>

    <!-- Bandeau de confidentialit√© (premi√®re visite) -->
    <div id="privacyBanner" style="display: none; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-left: 4px solid #2196F3; padding: 15px; margin: 15px 0; border-radius: 8px; position: relative; animation: slideDown 0.3s ease-out;">
      <button id="closeBanner" style="position: absolute; top: 10px; right: 10px; background: none; border: none; font-size: 20px; cursor: pointer; color: #1976d2; opacity: 0.7; transition: opacity 0.2s;" title="Fermer d√©finitivement">√ó</button>
      <div style="display: flex; align-items: start; gap: 12px;">
        <span style="font-size: 28px; flex-shrink: 0;">üç™</span>
        <div>
          <h3 style="margin: 0 0 8px 0; color: #1565c0; font-size: 15px; font-weight: 600;">
            üìå Information sur le stockage de vos pr√©f√©rences
          </h3>
          <p style="margin: 0 0 10px 0; color: #0d47a1; font-size: 13px; line-height: 1.6;">
            Cette extension synchronise vos pr√©f√©rences via <strong>localStorage</strong>, <strong>chrome.storage.sync</strong> et <strong>serveur cloud s√©curis√©</strong>.
          </p>
          <ul style="margin: 0 0 10px 0; padding-left: 20px; color: #0d47a1; font-size: 12px; line-height: 1.8;">
            <li>‚úÖ <strong>UUID anonyme</strong> g√©n√©r√© localement (aucun compte requis)</li>
            <li>‚úÖ <strong>Stockage cloud chiffr√©</strong> pour synchronisation multi-appareils</li>
            <li>üîí <strong>Mappings d'anonymisation en cache local uniquement</strong> (jamais envoy√©s)</li>
            <li>‚úÖ <strong>Pas de tracking</strong> ou collecte d'usage</li>
            <li>‚úÖ <strong>Export/Import manuel</strong> disponible ci-dessous</li>
            <li>‚ö†Ô∏è <strong>Donn√©es confidentielles</strong> : jamais stock√©es en base</li>
          </ul>
          <p style="margin: 0; color: #1565c0; font-size: 12px; font-style: italic;">
            üîê En validant, un UUID anonyme sera g√©n√©r√© et vos pr√©f√©rences seront synchronis√©es de mani√®re s√©curis√©e.
          </p>
        </div>
      </div>
    </div>

    <!-- Activation principale -->
    <div class="main-toggle">
      <label class="toggle">
        <input type="checkbox" id="enabledToggle">
        <span class="slider"></span>
        <span class="label">Extension activ√©e</span>
      </label>
    </div>

    <!-- Configuration API -->
    <div class="section">
      <h3>Configuration API</h3>
      <div class="input-group">
        <label for="apiUrl">URL de l'API Whisper:</label>
        <input type="url" id="apiUrl" placeholder="http://localhost:8001">
        <button id="testApiBtn" class="btn-secondary">Tester</button>
      </div>
    </div>

    <!-- Onglets pour les cat√©gories -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="personal">üîë Personnelles</button>
      <button class="tab-btn" data-tab="professional">üíº Professionnelles</button>
      <button class="tab-btn" data-tab="sensitive">üè• Sensibles</button>
      <button class="tab-btn" data-tab="contextual">üåç Contextuelles</button>
    </div>

    <!-- Donn√©es personnelles -->
    <div id="personal" class="tab-content active">
      <div class="section">
        <h3>üîë Donn√©es personnelles des individus</h3>
        <div class="checkbox-grid">
          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_names">
            <span class="checkmark"></span>
            <div>
              <span class="title">Noms et pr√©noms</span>
              <span class="description">Jean Dupont ‚Üí ***NAME***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_addresses">
            <span class="checkmark"></span>
            <div>
              <span class="title">Adresses postales</span>
              <span class="description">123 rue de la Paix ‚Üí ***ADDRESS***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_phone">
            <span class="checkmark"></span>
            <div>
              <span class="title">Num√©ros de t√©l√©phone</span>
              <span class="description">01.23.45.67.89 ‚Üí ***PHONE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_email">
            <span class="checkmark"></span>
            <div>
              <span class="title">Emails</span>
              <span class="description">user@domain.com ‚Üí ***EMAIL***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_birth_dates">
            <span class="checkmark"></span>
            <div>
              <span class="title">Dates de naissance / √Çge</span>
              <span class="description">15/03/1985, 38 ans ‚Üí ***DATE_NAISSANCE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_nir">
            <span class="checkmark"></span>
            <div>
              <span class="title">NIR / S√©curit√© sociale</span>
              <span class="description">1 23 45 67 890 123 ‚Üí ***NIR***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_id_cards">
            <span class="checkmark"></span>
            <div>
              <span class="title">Cartes d'identit√©</span>
              <span class="description">N¬∞ CNI ‚Üí ***CNI***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_passports">
            <span class="checkmark"></span>
            <div>
              <span class="title">Passeports</span>
              <span class="description">N¬∞ passeport ‚Üí ***PASSEPORT***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_ip">
            <span class="checkmark"></span>
            <div>
              <span class="title">Adresses IP</span>
              <span class="description">192.168.1.1 ‚Üí ***IP***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_logins">
            <span class="checkmark"></span>
            <div>
              <span class="title">Identifiants num√©riques</span>
              <span class="description">Login, cookies ‚Üí ***LOGIN***</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Donn√©es professionnelles -->
    <div id="professional" class="tab-content">
      <div class="section">
        <h3>üíº Donn√©es professionnelles</h3>
        <div class="checkbox-grid">
          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_employee_ids">
            <span class="checkmark"></span>
            <div>
              <span class="title">Matricules employ√©s</span>
              <span class="description">EMP12345 ‚Üí ***MATRICULE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_performance_data">
            <span class="checkmark"></span>
            <div>
              <span class="title">√âvaluations de performance</span>
              <span class="description">Notes RH ‚Üí ***EVALUATION***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_salary_data">
            <span class="checkmark"></span>
            <div>
              <span class="title">Donn√©es de paie</span>
              <span class="description">3500‚Ç¨ brut ‚Üí ***SALAIRE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_schedules">
            <span class="checkmark"></span>
            <div>
              <span class="title">Planning individuels</span>
              <span class="description">Horaires personnels ‚Üí ***PLANNING***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_internal_comm">
            <span class="checkmark"></span>
            <div>
              <span class="title">Communications internes</span>
              <span class="description">Emails, messages ‚Üí ***COMM_INTERNE***</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Donn√©es sensibles -->
    <div id="sensitive" class="tab-content">
      <div class="section">
        <h3>üè• Donn√©es sensibles sp√©cifiques</h3>
        <div class="checkbox-grid">
          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_medical_data">
            <span class="checkmark"></span>
            <div>
              <span class="title">Donn√©es de sant√©</span>
              <span class="description">Diagnostics, traitements ‚Üí ***MEDICAL***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_bank_accounts">
            <span class="checkmark"></span>
            <div>
              <span class="title">Comptes bancaires</span>
              <span class="description">RIB, relev√©s ‚Üí ***COMPTE_BANCAIRE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_credit_cards">
            <span class="checkmark"></span>
            <div>
              <span class="title">Cartes de cr√©dit</span>
              <span class="description">4532 1234 5678 9012 ‚Üí ***CARTE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_iban">
            <span class="checkmark"></span>
            <div>
              <span class="title">IBAN</span>
              <span class="description">FR76 1234 5678 ‚Üí ***IBAN***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_transactions">
            <span class="checkmark"></span>
            <div>
              <span class="title">Transactions</span>
              <span class="description">Virements, dettes ‚Üí ***TRANSACTION***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_grades">
            <span class="checkmark"></span>
            <div>
              <span class="title">Notes scolaires</span>
              <span class="description">Bulletins, 15/20 ‚Üí ***NOTE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_legal_cases">
            <span class="checkmark"></span>
            <div>
              <span class="title">Dossiers juridiques</span>
              <span class="description">Litiges, sanctions ‚Üí ***DOSSIER_JURIDIQUE***</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Donn√©es contextuelles -->
    <div id="contextual" class="tab-content">
      <div class="section">
        <h3>üåç Donn√©es contextuelles</h3>
        <div class="checkbox-grid">
          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_locations">
            <span class="checkmark"></span>
            <div>
              <span class="title">Localisation pr√©cise</span>
              <span class="description">Lieux identifiants ‚Üí ***LIEU***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_geolocations">
            <span class="checkmark"></span>
            <div>
              <span class="title">G√©olocalisation</span>
              <span class="description">48.8566¬∞ N ‚Üí ***COORDONNEES***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_access_badges">
            <span class="checkmark"></span>
            <div>
              <span class="title">Badges d'acc√®s</span>
              <span class="description">Identifiants d'acc√®s ‚Üí ***BADGE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_photo_references">
            <span class="checkmark"></span>
            <div>
              <span class="title">R√©f√©rences photos</span>
              <span class="description">Photos identifiables ‚Üí ***PHOTO***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_biometric">
            <span class="checkmark"></span>
            <div>
              <span class="title">Donn√©es biom√©triques</span>
              <span class="description">Empreintes, reconnaissance ‚Üí ***BIOMETRIE***</span>
            </div>
          </label>

          <label class="checkbox-item">
            <input type="checkbox" id="anonymize_urls">
            <span class="checkmark"></span>
            <div>
              <span class="title">URLs</span>
              <span class="description">https://site.com ‚Üí ***URL***</span>
            </div>
          </label>
        </div>
      </div>
    </div>

    <!-- Boutons de test -->
    <div class="section">
      <h3>Tests</h3>
      <div class="button-group">
        <button id="testAnonymizationBtn" class="btn-primary">
          <span class="icon">üîç</span>
          Tester l'anonymisation
        </button>
        <button id="presetBtn" class="btn-secondary">
          <span class="icon">‚ö°</span>
          Profil RGPD Complet
        </button>
      </div>
    </div>

    <!-- Actions rapides -->
    <div class="section">
      <h3>Actions</h3>
      <div class="button-group">
        <button id="saveBtn" class="btn-primary" style="flex: 1;">üíæ Sauvegarder</button>
      </div>
      <div class="button-group" style="margin-top: 10px;">
        <button id="enableAllBtn" class="btn-secondary">Tout activer</button>
        <button id="disableAllBtn" class="btn-secondary">Tout d√©sactiver</button>
        <button id="resetBtn" class="btn-secondary">R√©initialiser</button>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="api-info">
        <span id="apiStatus">API: D√©connect√©e</span>
        <span id="processingTime"></span>
      </div>
      <div class="version">Version 2.0 - RGPD Compliant</div>
    </div>
  </div>

  <script src="popup.js"></script>
  <script src="privacy-banner.js"></script>
  
  <!-- Animations CSS pour le bandeau -->
  <style>
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideUp {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(-20px);
      }
    }
    
    #closeBanner {
      transition: all 0.2s ease;
    }
    
    #closeBanner:hover {
      opacity: 1 !important;
      transform: scale(1.2) !important;
    }
  </style>
</body>
</html>